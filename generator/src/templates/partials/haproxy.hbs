{{!Only version 1.5.0 and newer support TLS}}
{{#if (minver "1.5.0" form.serverVersion)}}
global
    # {{form.config}} configuration, tweak to your needs
    ssl-default-bind-ciphers {{output.cipherSuites}}
    ssl-default-bind-options{{#unless (includes "SSLv3" output.protocols)}} no-sslv3{{/unless}}{{#unless (includes "TLSv1" output.protocols)}} no-tlsv10{{/unless}}{{#unless (includes "TLSv1.1" output.protocols)}} no-tlsv11{{/unless}} no-tls-tickets
    ssl-default-server-ciphers {{output.cipherSuites}}
    ssl-default-server-options{{#unless (includes "SSLv3" output.protocols)}} no-sslv3{{/unless}}{{#unless (includes "TLSv1" output.protocols)}} no-tlsv10{{/unless}}{{#unless (includes "TLSv1.1" output.protocols)}} no-tlsv11{{/unless}} no-tls-tickets
{{#if (includes ":DHE" output.cipherSuites)}}

    # generate with: $ openssl dhparam -out /path/to/dhparam.pem 2048
    ssl-dh-param-file /path/to/dhparam.pem
{{/if}}

frontend ft_test
    mode    http
    bind    :443 ssl crt /path/to/<cert+privkey+intermediate>
    bind    :80
    redirect scheme https code 301 if !{ ssl_fc }
{{#if form.hsts}}

    # HSTS ({{output.hstsMaxAge}} seconds)
    http-response set-header Strict-Transport-Security max-age={{output.hstsMaxAge}}
{{/if}}
{{else}}
Sorry, TLS is not supported in this version of HAProxy.
{{/if}}